<!DOCTYPE html>
<html>
<html lang="en">
<head>
    <link href='http://fonts.googleapis.com/css?family=Cabin:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="viewport" content="initial-scale=1" />
    <meta charset="utf-8">
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon" />
    <title>Clark Feusier | Another Explanation of Composition and Inheritance</title>
    <link rel="stylesheet" type="text/css" href="../vendor/stylesheets/normalize.css">
    <link rel="stylesheet" type="text/css" href="../stylesheets/blog_template.css">
    <script type="text/javascript" src="../vendor/javascripts/modernizr.js"></script>
    <script type="text/javascript" src="../vendor/syntaxhighlighter_3.0.83/scripts/shCore.js"></script>
    <script type="text/javascript" src="../vendor/syntaxhighlighter_3.0.83/scripts/shBrushRuby.js"></script>
    <link href="../vendor/syntaxhighlighter_3.0.83/styles/shCore.css" rel="stylesheet" type="text/css" />
    <link href="../vendor/syntaxhighlighter_3.0.83/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div id="containermax">
        <header>
            <div style="display: inline-block; margin-top: 13px; margin-left: 20px;">
                <a href="../index.html" style="margin: 0px; text-decoration: underline;"><img id="homeicon" style="border-bottom: 2px solid #402C21;" src="http://www.clipartbest.com/download?clipart=di7e57rxT" width="27px" height="27px"></a><a href="../index.html" id="brand">Clark Feusier</a>
            </div>
        </header>
        <div class="bodycontentwrap">
            <div class="bodycontent">
                <div>
                    <h2>Another Explanation of Composition and Inheritance ... ugh</h2>
                    <hr />
                    <script type="text/javascript">SyntaxHighlighter.all()</script>
                    <p>
                        There are a lot of articles on the web covering the differences between <em>inheritance</em> and <em>composition</em> in software design -- when to use one or the other, how inheritance is the devil, blah blah bliggityblah. I am writing this piece to solidify my own understanding on the topic, so I might take some liberties with my presentation. Also, all examples will be using Ruby, though most of the concepts are programming-language-agnostic. <em>Allons-y!</em>
                    </p>
                    <hr />
                    <h3>Main Motivation: Laziness</h3>
                    <p>
                        This isn't a new point -- programmers are notoriously lazy (in some sense). They don't like to do more work than they necessary to solve a given problem. They don't like to repeat tedious tasks that could be automated with code. They don't like to have to maintain messy codebases that could be DRYed up. So, software developers tend to <em>reuse</em> code. Reusable code is produced by using inheritance and composition (correctly). <em>et Voil&agrave</em> -- inheritance and composition motivated.
                    </p>
                    <hr />
                    <h3>Inheritance</h3>
                    <p>
                        Inheritance in software tends to refer to using 'parent' and 'child' relationships between classes to share functionality between the parent and children classes. In Ruby, a contrived example might look like this:
                    </p>
                    <pre class="brush: ruby">
                        class Parent
                          def family_history
                            puts "PARENT family history"
                          end
                        end

                        class Child < Parent
                        end

                        gbush = Parent.new
                        gwbush = Child.new

                        gbush.family_history # => "PARENT family history"
                        gwbush.family_history # => "PARENT family history"
                    </pre>
                    <p>
                        First, a parent class is created. Some functionality or behavior is added to that parent class (in this case, printing the family history of the parent). Next, a child class is created with <code>Child < Parent</code>. The '<' is all that is needed to 'connect' the parent and child classes in an inheritance relationship.
                    </p>
                    <p>
                        Now we create a parent object and a child object. Finally, we can call <code>#family_history</code> on both the parent and child object even though the child class never explicitly defined a <code>#family_history</code> method. <em>Both the parent and child</em> return the <strong>parent's</strong> family history when <code>#family_history</code> is called.
                    </p>
                    <p>
                        This contrived example showed how you can use inheritance to share behavior between two classes. This example only made mild sense because a child shares her parents' family history -- there is a very tight relationship in that a child's family history just <strong><em>is</em></strong> her parents' family history because of the relationship between parents and children.
                    </p>
                    <p>
                        However, usually you don't want to use inheritance unless you require your parent to maintain its own state. Let's modify the example to show a case where inheritance would make even more sense because the parent is storing a last name in an instance variable.
                    </p>
                    <pre class="brush: ruby">
                        class Parent
                          attr_accessor :last_name

                          def initialize(last_name)
                            @last_name = last_name
                          end

                          def family_history
                            puts "PARENT family history"
                          end
                        end

                        class Child < Parent
                        end

                        roger = Parent.new("Feusier")
                        jessica = Child.new("Feusier")

                        roger.last_name # => "Feusier"
                        jessica.last_name # => "Feusier"

                        jessica.last_name = "Lex"

                        roger.last_name # => "Feusier"
                        jessica.last_name # => "Lex"
                    </pre>
                    <p>
                        As you can see, the parent now initializes with a last name, as does the child. It makes sense to use inheritance here because the child <em>usually</em> shares a last name with a parent for a signficant part of his life. The beauty of this inheritance pattern is the reusability of the parent's family history and last name for children with the ability for the child to change his last name if needed, e.g., line 22 where jessica's last name is changed.
                    </p>
                    <p>
                        Now that we have a grasp of inheritance, let's be honest. These simplistic examples tend to give beginners (as myself) an overly romanticized picture of inheritance. Modeling the real-world as necessary for production software is never this clean. The real-world is made up of a lot of <em>has-a</em> relationships between objects and only a few <em>is-a</em> relationships. There are a lot more cases in the world like this: I am a human. I have a brain. My dog is a dog. My dog has a brain. Should my dog and I stand in an inheritance relation to some direct parent just because we both share the functionality of having a brain? Probably not. It makes more sense to model this case as a scenario where my dog and I are both <em><strong>composed</strong></em> of brains (as well as main other things), i.e., we both <em><strong>have</strong></em> brains. BOOM -- composition re-motivated.
                    </p>
                    <hr />
                    <h3>Composition</h3>
                    <p>
                        You can compose an object out of other objects (behavior or state). This can be done using class-based composition or module-based composition. I will focus on the latter because it is far more common to see composition via modules. Let's say that I am trying to model a car class so that I can create car objects for my dealership database.
                    </p>
                    <p>
                        I will be using at least one class -- the <em>Car</em> class. But, instead of making that Car class inherit functionality from a parent class like a <em>Vehicle</em> class, I can use modules to replace the parent classes. If we want a car object to have 4 wheels, then we can <em><strong>compose</strong></em> the car out of a module that replicates "has 4 wheels" behavior.
                    </p>
                    <pre class="brush: ruby">
                        module FourWheels

                          def self.four_wheels
                            puts "4 WHEELS WOOHOO!"
                          end

                        end

                        class Car

                          def four_wheels
                            FourWheels.four_wheels
                          end

                        end

                        car = Car.new

                        car.four_wheels # => "4 WHEELS WOOHOO!"
                    </pre>
                    <p>
                        The beauty of composition via modules and mixins is that you can abstract your code to handle more cases while still keeping your code organized and decoupled. For example, instead of the above code, we could do the following:
                    </p>
                    <pre class="brush: ruby">
                        module Wheels

                          def self.wheels(num_wheels)
                            puts "#{num_wheels} WHEELS WOOHOO!"
                          end

                        end

                        class Car

                          def initialize(wheels)
                            @wheels = wheels
                          end

                          def wheels
                            Wheels.wheels(@wheels)
                          end

                        end

                        class Tricycle

                          def initialize(wheels)
                            @wheels = wheels
                          end

                          def wheels
                            Wheels.wheels(@wheels)
                          end

                        end

                        car = Car.new(4)
                        tricycle = Tricycle.new(3)

                        car.wheels # => "4 WHEELS WOOHOO!"
                        tricycle.wheels # => "3 WHEELS WOOHOO!"
                    </pre>
                    <p>
                        Obviously the example is <em>way</em> overkill for just creating objects with a number of wheels :) But, it does show how you can easily use composition to abstract away from concrete cases, increasing reusability and maintainability (usually).
                    </p>
                    <hr />
                    <p>
                        I will leave you with the following 'practical' method for deciding to use inheritance or composition.
                    </p>
                    <blockquote>
                        "The choice of which is better ... depends on if you need to maintain state in each function call in the reusable portion of your code" <a href="http://ruby.learncodethehardway.org/book/ex44.html" target="_blank">(source)</a>.
                    </blockquote>
                    <p>
                        If you need the reusable part of your code (the parent class or the module to mixin) to store and persist its own state, then you should probably use inheritance. If you can store state in the 'child' part of your code, then you should use composition. For example, the Wheels module doesn't need to store how many of 'itself' is required within itself, that information is provided by each of the classes that mixin the Wheels module. That being said, more information and context will be required for actually deciding which design pattern to use in your software. Good luck!
                    </p>
                </div>
            </div>
            <div id="bodysidebar">
                <div id="authorimg">
                    <img src="http://profile.ak.fbcdn.net/hprofile-ak-ash3/t1.0-1/s320x320/548436_10101038017860745_492696320_n.jpg" alt="Clark Feusier's LinkedIn Profile" width="100%">
                </div>
                <h2 id="authortextheading">Makin' Stacks, Yo... Full-Stacks</h2>
                <p>
                    I am a student at Dev Bootcamp in San Francisco, California. Born and raised in the San Francisco Bay Area.
                    Educated at California Polytechnic State University, San Luis Obispo (physics and philosophy). Graduate education at the University of Chicago (metalogic and philosophy of science).
                </p>
                <hr />
                <div id="bottomhalfsidebar">
                    <h3 id="bottomhalfheader">Play Time</h3>
                    <li>Playing music, mainly piano</li>
                    <li>Beer, wine, tea, coffee</li>
                    <li>Hiking with Fiddle</li>
                    <li>Philosophizing</li>
                </div>
            </div>
            <div id="bodysidebar" style="margin-bottom: 20px;">
                <h2 style="text-align: center;">Of the Week</h2>
                <p>
                    Development Topic: <span style="color: #402C21; font-size: 13pt; margin-left: 3px;">SQL and databases</span><br />
                    Motivation: <span style="color: #402C21; font-size: 13pt; margin-left: 3px;">I got superpowers</span><br />
                    Music: <span style="color: #402C21; font-size: 13pt; margin-left: 3px;">1Train - A$AP Rocky <em>et al.</em></span><br />
                </p>
            </div>
        </div>
        <div id="bottomwrap">
            <div id="about_section">
                <p style="text-align:center;">
                    My partner in crime is named Fiddle --
                    She likes chasing lizards --
                    Her best friend (other than me) is named Banjo --
                    <a href="../fiddle.html">Say Hi!</a>
                </p>
            </div>
            <footer>
                <div id="footerleft">
                    <a id="footerhome" href="../index.html">CF HOME</a>
                </div>
                <div id="footerright">
                    <a href="http://github.com/Cfeusier">GitHub</a> |
                    <a href="mailto:cfeusier@gmail.com">Email</a> |
                    <a href="http://linkedin.com/in/clarkfeusier">LinkedIn</a>
                </div>
            </footer>
        </div>
    </div>
</body>
</html>