<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>How to Organize your Files and Folders - Node + Express App Skeleton</title>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,600,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://clarkfeusier.com/css/base.css">
    <link rel="shortcut icon" type="image/x-icon" href="http://clarkfeusier.com/img/favicon.ico" />
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shCore.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushRuby.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushYaml.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushCss.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushJScript.js"></script>
    <link href="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/styles/shCore.css" rel="stylesheet" type="text/css" />
    <link href="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-P9FNCG" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-P9FNCG');
    </script>
    <!-- End Google Tag Manager -->
    <!-- Setup SyntaxHighlighter -->
    <script type="text/javascript">SyntaxHighlighter.all()</script>
    <!-- End SyntaxHighlighter Setup -->
    <header>
        <div id="logo">
            <img src="http://clarkfeusier.com/img/headshot.png" alt="">
        </div>
        <div id="site-heading">
            <h2 class="title">Clark Feusier</h2>
            <h3 class="subtitle">Software Engineer and Metalogician</h3>
        </div>
        <ul id="nav">
         <li class=""><a href="http://clarkfeusier.com/pages/about">About</a></li>
         <li class=""><a href="http://clarkfeusier.com/index.html">Writing</a></li>
         <li class=""><a href="http://clarkfeusier.com/pages/portfolio">Portfolio</a></li>
         <li><a href="#" id="contact-section">Contact</a></li>
     </ul>
     <div id="contact-wrapper">
        <div id="contact-content">
            <ul id="contact-list">
                <i class="fa fa-envelope-o contact-icon"></i>
                <li><a href="mailto:cfeusier@gmail.com">  cfeusier@gmail.com</a></li>
                <li class="separator">/</li>
                <li><a href="http://github.com/cfeusier"><i class="fa fa-github"></i></a></li>
                <li><a href="http://twitter.com/clarkfeusier"><i class="fa fa-twitter"></i></a></li>
                <li><a href="http://facebook.com/cfeusier"><i class="fa fa-facebook"></i></a></li>
                <li><a href="http://linkedin.com/in/clarkfeusier"><i class="fa fa-linkedin"></i></a></li>
            </ul>
        </div>
        <a href="#" id="contact-close"><i class="fa fa-times"></i></a>
    </div>
</header>
<div id="main-contents">
<div class="single-post">
    <div class="container">
        <div class="post-item">
            <div class="post-header">
                <div class="blog-no-header"></div>
            </div>
            <div class="post-body">
                <div class="meta">
                    <span class="date">07 January 2015</span>
                </div>
                <h2 class="title">How to Organize your Files and Folders - Node + Express App Skeleton</h2>
                <div class="content">
                    <h3 id="intro-stuff">Intro Stuff</h3>
<ul>
  <li>Disclaimers
    <ul>
      <li>Not the only way</li>
      <li>always tradeoffs</li>
      <li>i like this style, it helps me extend the app later, and my brain can visualize the app</li>
      <li>still have to configure to your liking</li>
      <li>depends on the type of app you are building</li>
    </ul>
  </li>
  <li>Versions (Node and Express)</li>
  <li>Motivations Summary
    <ul>
      <li>modular</li>
      <li>visually clean, aesthetically pleasing</li>
      <li>full view of app by hiding complexity</li>
      <li>abstraction for extensibility and maintenance</li>
    </ul>
  </li>
</ul>

<h2 id="directory-structure">Directory Structure</h2>

<script src="https://gist.github.com/Cfeusier/e580815b1270fb98f273.js"></script>

<ul>
  <li><code>app_name/</code> is your app root folder — this usually contains the entirety of your application</li>
  <li><code>client/</code> is your client-side code root folder — contains entirety of client-specific code</li>
  <li><code>server/</code> is your server-side code root folder — contains entirety of server-specific code</li>
  <li><code>[top-level shared]</code> refers to any code that is shared between the client and server</li>
  <li><code>[top-level vendor]</code> refers to any vendor or third-party code to which your whole app needs access — e.g.,<code>node_modules</code></li>
  <li><code>[top-level files]</code> refers to non-configuration specific top-level application files, e.g., <code>README.md</code></li>
  <li><code>[top-level configurations]</code> refers to global-app configuration code — e.g., <code>.gitignore</code>, <code>package.json</code>, <code>Procfile</code>, etc.</li>
</ul>

<p>The majority of the actual <strong>code</strong> for the application will be located in either the <code>client</code> or <code>server</code> directory. Let us start by looking at the structure of the <code>client</code> directory.</p>

<h3 id="client-directory-structure">Client Directory Structure</h3>

<script src="https://gist.github.com/Cfeusier/e50ee2ded97b3dc6d412.js"></script>

<h3 id="server-directory-structure">Server Directory Structure</h3>

<script src="https://gist.github.com/Cfeusier/e81b34ed90ffeb08c3cd.js"></script>

<h2 id="code-structure">Code Structure</h2>

<p>A. <code>server.js</code></p>

<script src="https://gist.github.com/Cfeusier/27327611de7db1dcdbe0.js"></script>

<p>B. <code>config/app.js</code></p>

<script src="https://gist.github.com/Cfeusier/af80a589cc456755a6ba.js"></script>

<ul>
  <li><strong>line 1</strong> <code>config/env.js</code> will export a function that when invoked will set up your environment — secrets, api keys, passwords, etc. — <em>don’t commit this!! add it to your version control .*ignore</em></li>
  <li><strong>line 2</strong> <code>config/db/db.js</code> will export a function that when invoked will set up your database and connect an adapter if used</li>
  <li><strong>line 3</strong> requires the express framework</li>
  <li><strong>line 4</strong> stores the app object — app object is created by the constructor exported by express</li>
  <li><strong>line 5</strong> requires the path module for access to path helpers</li>
  <li><strong>line 6</strong> requires the body parser module for parsing request/response bodies</li>
  <li><strong>line 7</strong> requires the method override module for overriding http requests to handle put/delete methods</li>
  <li><strong>lines 9 - 17</strong> export a function which returns an app object for use throughout the program — this function also configures the application with parsers, overrides, middleware modules, static asset handlers, and routes
    <ul>
      <li><strong>lines 10 - 11</strong> configures the app to use the JSON body parser for http request/response body parsing</li>
      <li><strong>line 12</strong> configures the app to encode urls when parsing requests/responses</li>
      <li><strong>line 13</strong> configures the app to use X-HTTP-Method-Override when overriding http methods</li>
      <li><strong>line 14</strong> configures the app to serve the client directory as static assests — change the to whatever public directory you want served as static asset</li>
      <li><strong>line 15</strong> <code>../routers/route_manifest.js</code> will export a function that is invoked with the app object as an input — the route manifest will require all of the app’s routers and invoke them with the app object so that each router can pin it’s route listeners/handlers onto the app object</li>
      <li><strong>line 16</strong> returns the app object for exportation</li>
    </ul>
  </li>
</ul>

<p>The summary of this app config file — <strong>configure the app</strong> environment, database, and global settings, then instantiate your routers and return the app object for use elsewhere.</p>

<p>I bet you are curious about how we are configuring our databases and routers — let’s follow line 2 and line 15 into their respective files, starting with <code>config/db/db.js</code>.</p>

<p>C. <code>config/db/db.js</code></p>

<script src="https://gist.github.com/Cfeusier/6231afbff8731f43e9bd.js"></script>

<p>D. <code>router/route_manifest.js</code></p>

<script src="https://gist.github.com/Cfeusier/8e6a74b3b8e917b7ae2b.js"></script>

<p>E. <code>router/sub_router_file.js</code></p>

<p>This is an example express router that might be used for an internal api — request listener and handler.</p>

<script src="https://gist.github.com/Cfeusier/0ad57b777ca760e62e46.js"></script>

<p>F. <code>router/sub_router2_file.js</code></p>

<p>This is an example express router that might be used for serving up static assets to a client.</p>

<script src="https://gist.github.com/Cfeusier/3a507cdb8cc17687fe5f.js"></script>

<p>G. <code>utils/responder.js</code></p>

<script src="https://gist.github.com/Cfeusier/93eacebc1caeebb32f21.js"></script>

<p>H. <code>utils/collection_interface.js</code></p>

<p>This is an example utility module that helps handle requests for <em>one</em> collection or model. This example uses mongoose and mongodb, but could be adapted to any database and adapter given it provides a <code>create</code> and <code>find</code> interface. Assume that the require statement which saves an object into <code>models</code> is returning a bunch of model ‘classes’.</p>

<script src="https://gist.github.com/Cfeusier/7586afd70f29d9a92e81.js"></script>

<h2 id="overview-of-app-flow">Overview of App Flow</h2>

<p><img src="/img/blog/node_express.png" width="90%" style="margin: 0 auto;" /></p>

<h2 id="summary">Summary</h2>


                </div>
            </div>
            <div class="post-tags">
                <i class="fa fa-tags"></i>
                
                <a class="tag_list_link" href="http://clarkfeusier.com/tag/javascript">javascript</a>
                <span class="seperator">,</span>
                
                <a class="tag_list_link" href="http://clarkfeusier.com/tag/best practices">best practices</a>
                <span class="seperator">,</span>
                
                <a class="tag_list_link" href="http://clarkfeusier.com/tag/implementation examples">implementation examples</a>
                <span class="seperator">,</span>
                
                <a class="tag_list_link" href="http://clarkfeusier.com/tag/node">node</a>
                <span class="seperator">,</span>
                
                <a class="tag_list_link" href="http://clarkfeusier.com/tag/express">express</a>
                <span class="seperator">,</span>
                
            </div>
            <ul class="post-socials">
                <li><a href="https://www.facebook.com/sharer/sharer.php?u=http://clarkfeusier.com/2015/01/07/file-and-directory-organization-node-express-app/&t=How to Organize your Files and Folders - Node + Express App Skeleton" target="_blank"><i class="fa fa-facebook"></i></a></li>
                <li><a href="https://twitter.com/intent/tweet?original_referer=http://clarkfeusier.com/2015/01/07/file-and-directory-organization-node-express-app/&text=How to Organize your Files and Folders - Node + Express App Skeleton&url=http://clarkfeusier.com/2015/01/07/file-and-directory-organization-node-express-app/" target="_blank"><i class="fa fa-twitter"></i></a></li>
                <li><a href="https://plus.google.com/share?url=http://clarkfeusier.com/2015/01/07/file-and-directory-organization-node-express-app/" target="_blank"><i class="fa fa-google-plus"></i></a></li>
            </ul>
        </div>
    </div>
    <div id="blog-pagination">
        <ul>
        	
            <li class="prev"><a href="http://clarkfeusier.com/2015/01/04/tree-data-structure-simple-binary-search-decision/"><i class="fa fa-angle-left"></i><span>Prev</span></a></li>
            
            
            <li class="separator"></li>
            
            
        </ul>
    </div>
</div>
 </div>
       <footer>
            <div id="footer-quote">
                <div class="container">
                    <div class="contents">
                        <div class="quote-icon">
                            <i class="fa fa-quote-right"></i>
                        </div>
                        <span class="quote-name">Percy Bysshe Shelley</span>
                        <div class="quote-text">
                            The soul's joy lies in <span class="colored-text">doing</span>.
                        </div>
                    </div>
                </div>
            </div>
            <div id="bottom">
                <div class="container foot">
                    <ul id="social-icons">
                        <li><a href="http://github.com/cfeusier"><i class="fa fa-github"></i></a></li>
                        <li><a href="http://twitter.com/clarkfeusier"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="http://facebook.com/cfeusier"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="http://linkedin.com/in/clarkfeusier"><i class="fa fa-linkedin"></i></a></li>
                    </ul>
                    <div id="copyright">© COPYRIGHT 2014 Clark Feusier</div>
                    <a id="home-circle" href="http://clarkfeusier.com"><i class="fa fa-home"></i></a>
                </div>
            </div>
       </footer>
       <script type="text/javascript" src="http://clarkfeusier.com/js/jquery-1.11.0.min.js"></script>
       <script type="text/javascript" src="http://clarkfeusier.com/js/header_glitter.js"></script>
    </body>
</html>