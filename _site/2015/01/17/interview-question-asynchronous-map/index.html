<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Popular Interview Question Series: Asynchronous Map with Variations</title>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,600,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://clarkfeusier.com/css/base.css">
    <link rel="shortcut icon" type="image/x-icon" href="http://clarkfeusier.com/img/favicon.ico" />
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shCore.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushRuby.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushYaml.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushCss.js"></script>
    <script type="text/javascript" src="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/scripts/shBrushJScript.js"></script>
    <link href="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/styles/shCore.css" rel="stylesheet" type="text/css" />
    <link href="http://clarkfeusier.com/vendor/syntaxhighlighter_3.0.83/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-P9FNCG" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-P9FNCG');
    </script>
    <!-- End Google Tag Manager -->
    <!-- Setup SyntaxHighlighter -->
    <script type="text/javascript">SyntaxHighlighter.all()</script>
    <!-- End SyntaxHighlighter Setup -->
    <header>
        <div id="logo">
            <img src="http://clarkfeusier.com/img/headshot.png" alt="">
        </div>
        <div id="site-heading">
            <h2 class="title">Clark Feusier</h2>
            <h3 class="subtitle">Software Engineer and Metalogician</h3>
        </div>
        <ul id="nav">
         <li class=""><a href="http://clarkfeusier.com/pages/about">About</a></li>
         <li class=""><a href="http://clarkfeusier.com/index.html">Writing</a></li>
         <li class=""><a href="http://clarkfeusier.com/pages/portfolio">Portfolio</a></li>
         <li><a href="#" id="contact-section">Contact</a></li>
     </ul>
     <div id="contact-wrapper">
        <div id="contact-content">
            <ul id="contact-list">
                <i class="fa fa-envelope-o contact-icon"></i>
                <li><a href="mailto:cfeusier@gmail.com">  cfeusier@gmail.com</a></li>
                <li class="separator">/</li>
                <li><a href="http://github.com/cfeusier"><i class="fa fa-github"></i></a></li>
                <li><a href="http://twitter.com/clarkfeusier"><i class="fa fa-twitter"></i></a></li>
                <li><a href="http://facebook.com/cfeusier"><i class="fa fa-facebook"></i></a></li>
                <li><a href="http://linkedin.com/in/clarkfeusier"><i class="fa fa-linkedin"></i></a></li>
            </ul>
        </div>
        <a href="#" id="contact-close"><i class="fa fa-times"></i></a>
    </div>
</header>
<div id="main-contents">
<div class="single-post">
    <div class="container">
        <div class="post-item">
            <div class="post-header">
                <div class="blog-no-header"></div>
            </div>
            <div class="post-body">
                <div class="meta">
                    <span class="date">17 January 2015</span>
                </div>
                <h2 class="title">Popular Interview Question Series: Asynchronous Map with Variations</h2>
                <div class="content">
                    <p>One of my favorite ‘toy problems,’ often asked in technical interviews during a ‘screening’ phase, is to implement an <strong>asynchronous mapping</strong> function. This problem can be tricky because it tests your knowledge of <em>asynchronicity</em> and your ability to use <em>higher-order functions</em>. This knowledge is considered necessary for a web-application engineer — asynchronous programming techniques, event systems, and use of higher-order functions are standard for building web apps. So, many interviewers use this question to <em>cut to the chase</em>.</p>

<p>The prompt will usually go like this:</p>

<blockquote>
  Write an <strong>asyncMap</strong> function with two parameters &mdash; an array of asynchronous functions and a callback function. Each of the asynchronous functions takes a <em><strong>its own callback</strong></em> and invokes that callback when finished executing. The callback passed to <strong>asyncMap</strong> should be invoked on the results of the callbacks of the asynchronous functions. The order of the results should be the same as the order in which the asynchronous functions were invoked. Note, the order in which the asynchronous functions are passed to <strong>asyncMap</strong> determines the order of the results, not the order in which the asynchronous functions finish executing. After <em>all</em> the callbacks of the asynchronous functions have returned, <strong>asyncMap</strong> should invoke the callback on the collection of results.
</blockquote>

<p>If your head isn’t spinning by now, you shouldn’t be reading this. <strong><em>Go build a compiler or something.</em></strong></p>

<p>For those of us still here, let’s look at an example of the expected behavior and then dissect the prompt.</p>

<h2 id="example-of-expected-behavior">Example of Expected Behavior</h2>

<p>Each of the asynchronous functions (<code>job1</code>, <code>job2</code>, and <code>job3</code>) use a <code>setTimeout</code> function to simulate a long-running task.</p>

<script src="https://gist.github.com/Cfeusier/766a1031e12c860dc0c2.js"></script>

<p>Based on the example, <code>job2</code> will return first, <code>job3</code> will return second, and <code>job1</code> will return last, but the expectation is that <code>asyncMap</code> will <strong>make it appear</strong> as though the results being passed into the final callback were returned in the order of <code>job1</code> - <code>job2</code> - <code>job3</code>. The results will be passed into the callback, which logs the results in <strong>synchronous-appearing</strong> order, as seen on lines 17 - 19.</p>

<p>We have a clear expectation of the behavior of a <strong>single-case</strong>, so let’s dissect the prompt to see if we can pick out a more general expectation that handles all cases.</p>

<h2 id="dissecting-the-prompt">Dissecting the Prompt</h2>

<ul>
  <li>we are in JavaScript-land — the world of the browser, Node, the Event Loop, a single-thread, and web applications</li>
</ul>

<p>Obviously, you can implement asynchronous code behavior in a language that can handle multi-threading, but the prompt will be framed very differently. If you are being asked this question in an interview, it is because you are going to be working with the JavaScript in some capacity if they offer you the job.</p>

<ul>
  <li><code>asyncMap</code> will take two inputs — an array and a callback function</li>
</ul>

<p>The <strong>array</strong> argument will be full of <em>asynchronous</em> functions, and the <strong>callback function</strong> argument will be an action to perform when all of the functions in the array have finished executing.</p>

<p>Each member of the array can be thought of as a <strong><em>job</em></strong> that needs to be performed. The job will take time to complete, and because JavaScript runs on a single-thread, the job will block the event loop of the JavaScript interpreter if it is executed <em>synchronously</em>.</p>

<p>Instead, each job should be <strong>started</strong> and given instructions on what to do when the job is completed, and then the JavaScript interpreter can continue processing without needing to wait for each job to complete before even <strong>starting</strong> the next job. When each job finishes, it can use the instructions it was given to <strong>callback</strong> the main thread with the result of the job’s work. This is <em>one</em> way to implement <strong>asynchronicity</strong> — another popular style is to use <a href="https://promisesaplus.com/">Promises</a> instead of callbacks.</p>

<p>Don’t get confused by all the callbacks floating around. Our <code>asyncMap</code> function will take a <strong>single</strong> callback, while each of the functions within the input array will take <strong>its own</strong> callback, which will be different from the callback passed into <code>asyncMap</code> as the second argument.</p>

<p>Once all of the <strong>jobs</strong> have completed and triggered their individual callbacks, <code>asyncMap</code> should collect up all of the results from the jobs — the results should be ordered based on when the job was <strong>started</strong>, not when the job returned it’s value. Finally, the callback that was passed into <code>asyncMap</code> should be invoked with the results as an argument.</p>

<p><code>asyncMap</code> should effectively simulate a <em>synchronous</em> mapping function, i.e., even though the collection being enumerated over contains functions that will be executed asynchronously, the result of our <code>asyncMap</code> function will appear as though all of the jobs were executed synchronously.</p>

<p>Now that we have a target for which we can aim, let’s cover the concepts and techniques that will be involved in our algorithm, and then we will cover two possible solutions to the problem.</p>

<h2 id="concepts-and-techniques-involved">Concepts and Techniques Involved</h2>

<p>The interview question is testing you on your ability to comprehend and use the following:</p>

<ol>
  <li>asynchronous programming techniques</li>
  <li>higher-order functions</li>
  <li>callbacks</li>
</ol>

<p>Before discussing two possible solutions, I want to give a <strong>too long - didn’t read (tl;dr)</strong> overview of those three topics to make sure that everyone is on the same page.</p>

<h3 id="asynchronous-programming-techniques">Asynchronous Programming Techniques</h3>

<h3 id="higher-order-functions">Higher-Order Functions</h3>

<h3 id="callbacks">Callbacks</h3>

<h2 id="solutions">Solutions</h2>

<ol>
  <li>imperative style solution</li>
  <li>functional style solution</li>
</ol>

<p>What does that mean?</p>

<h2 id="solution-imperative">Solution: <em>imperative</em></h2>

<p>blahty blah</p>

<script src="https://gist.github.com/Cfeusier/4a6321bd3acd325b85d8.js"></script>

<h2 id="solution-functional">Solution: <em>functional</em></h2>

<p>blahty blah</p>

<script src="https://gist.github.com/Cfeusier/02ed48507b02b2b5c3f0.js"></script>

<h2 id="summary">Summary</h2>

<ul>
  <li>asynchronicity</li>
  <li>higher-order functions</li>
  <li>callbacks</li>
</ul>


                </div>
            </div>
            <div class="post-tags">
                <i class="fa fa-tags"></i>
                
                <a class="tag_list_link" href="http://clarkfeusier.com/tag/javascript">javascript</a>
                <span class="seperator">,</span>
                
                <a class="tag_list_link" href="http://clarkfeusier.com/tag/implementation examples">implementation examples</a>
                <span class="seperator">,</span>
                
                <a class="tag_list_link" href="http://clarkfeusier.com/tag/interview questions">interview questions</a>
                <span class="seperator">,</span>
                
                <a class="tag_list_link" href="http://clarkfeusier.com/tag/asynchronous">asynchronous</a>
                <span class="seperator">,</span>
                
                <a class="tag_list_link" href="http://clarkfeusier.com/tag/functional">functional</a>
                <span class="seperator">,</span>
                
            </div>
            <ul class="post-socials">
                <li><a href="https://www.facebook.com/sharer/sharer.php?u=http://clarkfeusier.com/2015/01/17/interview-question-asynchronous-map/&t=Popular Interview Question Series: Asynchronous Map with Variations" target="_blank"><i class="fa fa-facebook"></i></a></li>
                <li><a href="https://twitter.com/intent/tweet?original_referer=http://clarkfeusier.com/2015/01/17/interview-question-asynchronous-map/&text=Popular Interview Question Series: Asynchronous Map with Variations&url=http://clarkfeusier.com/2015/01/17/interview-question-asynchronous-map/" target="_blank"><i class="fa fa-twitter"></i></a></li>
                <li><a href="https://plus.google.com/share?url=http://clarkfeusier.com/2015/01/17/interview-question-asynchronous-map/" target="_blank"><i class="fa fa-google-plus"></i></a></li>
            </ul>
        </div>
    </div>
    <div id="blog-pagination">
        <ul>
        	
            <li class="prev"><a href="http://clarkfeusier.com/2015/01/16/interview-question-balanced-parentheses-stack/"><i class="fa fa-angle-left"></i><span>Prev</span></a></li>
            
            
            <li class="separator"></li>
            
            
        </ul>
    </div>
</div>
 </div>
       <footer>
            <div id="footer-quote">
                <div class="container">
                    <div class="contents">
                        <div class="quote-icon">
                            <i class="fa fa-quote-right"></i>
                        </div>
                        <span class="quote-name">Percy Bysshe Shelley</span>
                        <div class="quote-text">
                            The soul's joy lies in <span class="colored-text">doing</span>.
                        </div>
                    </div>
                </div>
            </div>
            <div id="bottom">
                <div class="container foot">
                    <ul id="social-icons">
                        <li><a href="http://github.com/cfeusier"><i class="fa fa-github"></i></a></li>
                        <li><a href="http://twitter.com/clarkfeusier"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="http://facebook.com/cfeusier"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="http://linkedin.com/in/clarkfeusier"><i class="fa fa-linkedin"></i></a></li>
                    </ul>
                    <div id="copyright">© COPYRIGHT 2014 Clark Feusier</div>
                    <a id="home-circle" href="http://clarkfeusier.com"><i class="fa fa-home"></i></a>
                </div>
            </div>
       </footer>
       <script type="text/javascript" src="http://clarkfeusier.com/js/jquery-1.11.0.min.js"></script>
       <script type="text/javascript" src="http://clarkfeusier.com/js/header_glitter.js"></script>
    </body>
</html>